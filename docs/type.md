# æ•°æ®ç±»å‹


**rust**å®šä¹‰å˜é‡ä¼šè‡ªåŠ¨æŒ‡å®šç±»å‹ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šç±»å‹


ç±»å‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹â€”â€”
- æ•´å‹(integer)
- æµ®ç‚¹æ•°(floating-point number)
- å¸ƒå°”å€¼(booleans)
- å­—ç¬¦(characters)
- æ··åˆ(compound)


## æ•´å‹


æ•´æ•°ç±»å‹ï¼Œæ²¡æœ‰åˆ†æ•°éƒ¨åˆ†ã€‚æ•´å‹åˆ†ä¸ºæœ‰ç¬¦å·(Signed)å’Œæ— ç¬¦å·ä¸¤ç§(Unsigned)

é•¿åº¦ | æœ‰ç¬¦å· | æ— ç¬¦å·
---|---|---
8-bit | i8 | u8
16-bit | i16 | u16
32-bit | i32 | u32
64-bit | i64 | u64
128-bit | i128 | u128
arch | isize | usize


æ€»å¾—æ¥è¯´ï¼Œå°±æ˜¯`i`æˆ–è€…`u`åŠ ä¸Šä½æ•°å°±æ˜¯æ•´å‹çš„ç±»å‹


### å–å€¼èŒƒå›´


æ¯ä¸€ä¸ªæœ‰ç¬¦å·æ•°çš„å–å€¼èŒƒå›´â€”â€”â€”â€”

-(2<sup>n-1</sup>) åˆ° 2<sup>n-1</sup> - 1 ä¹‹é—´


æ— ç¬¦å·æ•°çš„å–å€¼èŒƒå›´â€”â€”â€”â€”


0 åˆ° 2<sup>n</sup> - 1 ä¹‹é—´


æ¯”å¦‚`i8`ï¼ŒèŒƒå›´å°±æ˜¯â€”â€”


-(2<sup>8-1</sup>) < i8 < 2<sup>8-1</sup> - 1


-2<sup>7</sup> < i8 < 2<sup>7</sup> - 1


-128 < i8 < 127


ä¹Ÿå°±æ˜¯è¯´`i8`çš„çš„å–å€¼èŒƒå›´ä¸º *[-128, 127]*


å¦‚æœç»™ä¸€ä¸ª`i8`ç±»å‹çš„å˜é‡èµ‹å€¼äº†åœ¨è¿™ä¸ªå–å€¼èŒƒå›´ä¹‹å¤–çš„æ•°å­—


```rust
let n:i8 = 128;
```


å°±ä¼šæŠ¥é”™


```
the literal `128` does not fit into the type `i8` whose range is `-128..=127`
```


æ³¨æ„ï¼Œæ— ç¬¦å·çš„å–å€¼èŒƒå›´çš„å¹‚æ²¡æœ‰`-1`å°±æ˜¯`n`ï¼Œæ‰€ä»¥`u8`çš„å–å€¼èŒƒå›´æ˜¯


0 < u8 < 2<sup>n</sup> - 1


0 < u8 < 2<sup>8</sup> - 1


0 < u8 < 255


æ‰€ä»¥æ— ç¬¦å·çš„`u8`æ˜¯ *[0, 255]*ï¼Œæ¯”`i8`çš„ *128* è¦å¤§ï¼Œå…¶å®ç­‰äºå–å€¼èŒƒå›´æ•´ä½“åœ¨æ•°è½´å³ç§»åˆ°äº† *0*


> å„ç§å¯ä»¥è®¾ç½®æ•´å‹çš„æœ‰ç¬¦å·æ— ç¬¦å·çš„è¯­è¨€åŸºæœ¬éƒ½æ˜¯è¿™ç§è®¾ç½®ï¼Œæ¯”å¦‚**C/C++**ã€**java**ã€**SQL**


### è¿›åˆ¶(Number literals)


è¿›åˆ¶ | å®ä¾‹ | å¤‡æ³¨
---|---|---
Decimal |	98_222 | åè¿›åˆ¶
Hex | 0xff | åå…­è¿›åˆ¶
Octal | 0o77 | å…«è¿›åˆ¶
Binary | 0b1111_0000 | äºŒè¿›åˆ¶
Byte | b'A' | å­—èŠ‚(åªèƒ½è¡¨ç¤º`u8`)


ä¸‹é¢çš„`n`ä»¥16è¿›åˆ¶èµ‹å€¼`0xff`ï¼Œè¾“å‡ºä¸º`255`


```rust
let n:u8 = 0xff;
println!("{}", n);
```


è¿™é‡Œè§£é‡Šä¸€ä¸‹`Byte`ï¼Œå…¶å®å°±æ˜¯å¯ä»¥å¾—åˆ°é”®ç›˜ä¸Šçš„`ascii`å€¼


ä¸‹é¢çš„èµ‹å€¼ï¼Œå¯ä»¥çœ‹åˆ°å¤§`A`çš„å€¼æ˜¯`65`ï¼Œå°`a`çš„å€¼æ˜¯`97`ï¼Œå¹å·`!`çš„å€¼æ˜¯33


```rust
let A:u8 = b'a'; // 65
let a:u8 = b'a'; // 97
let exclamation:u8 = b'!'; // 33
```


### å¯è¯»æ€§åˆ†éš”ç¬¦


ä¸ºäº†æ–¹ä¾¿é˜…è¯»è¶…å¤§çš„æ•°å­—ï¼ŒRust è¯­è¨€å…è®¸ä½¿ç”¨ä¸€ä¸ª*è™šæ‹Ÿçš„åˆ†éš”ç¬¦*ä¹Ÿå°±æ˜¯*ä¸‹åˆ’çº¿*(`_`)æ¥å¯¹æ•°å­—è¿›è¡Œå¯è¯»æ€§åˆ†éš”ç¬¦ã€‚


æ¯”å¦‚ä¸ºäº†æé«˜`50000`çš„å¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å†™æˆ`50_000`ã€‚


```rust
let int_with_separator = 100_000;
```


**Rust**è¯­è¨€ä¼šåœ¨ç¼–è¯‘æ—¶ç§»é™¤æ•°å­—å¯è¯»æ€§åˆ†éš”ç¬¦`_`



## æµ®ç‚¹å‹


Rust ä¸å…¶å®ƒè¯­è¨€ä¸€æ ·æ”¯æŒ32ä½æµ®ç‚¹æ•°(f32)å’Œ64ä½æµ®ç‚¹æ•°(f64)ã€‚é»˜è®¤æƒ…å†µä¸‹èµ‹å€¼æœ‰å°æ•°ç‚¹çš„æ•°å­—å°†è¡¨ç¤º**64ä½æµ®ç‚¹æ•°**ï¼Œå› ä¸ºç°ä»£è®¡ç®—æœºå¤„ç†å™¨å¯¹ä¸¤ç§æµ®ç‚¹æ•°è®¡ç®—çš„é€Ÿåº¦å‡ ä¹ç›¸åŒï¼Œä½†64ä½æµ®ç‚¹æ•°ç²¾åº¦æ›´é«˜ã€‚


```rust
let x = 2.0; // é»˜è®¤64ä½æµ®ç‚¹æ•°
let y: f32 = 3.0; // è®¾å®šä¸º32ä½æµ®ç‚¹æ•°
```


> https://ieeexplore.ieee.org/document/5976968
> æŒ‰ç…§** IEEE-754**æ ‡å‡†ï¼Œ32ä½æµ®ç‚¹æ•°æ˜¯å•ç²¾åº¦ï¼Œ64ä½æµ®ç‚¹æ•°æ˜¯åŒç²¾åº¦


### è¿ç®—


Rustæ”¯æŒå„ç§åŸºæœ¬çš„æ•°å­¦ç®—æ³•ï¼Œæœ‰åŠ å‡ä¹˜é™¤ä»¥åŠæ±‚ä½™


```rust
// åŠ æ³•
let sum = 5 + 10;

// å‡æ³•
let difference = 95.5 - 4.3;

// ä¹˜æ³•
let product = 4 * 30;

// é™¤æ³•
let quotient = 56.7 / 32.2;
let floored = 2 / 3; // ç»“æœä¸º0ï¼Œæ•´å‹é™¤æ³•ï¼Œæœ€åç»“æœä½æ•´æ•°éƒ¨åˆ†

// æ±‚ä½™
let remainder = 43 % 5; // ç»“æœä¸º3ï¼ŒæŒ‰ç…§è®¡ç®—ï¼Œå•†ä¸º8ï¼Œä½™3
```


### å¯è¯»æ€§åˆ†éš”ç¬¦


æµ®ç‚¹æ•°ä¸€æ ·å¯ä»¥ä½¿ç”¨`_`æ¥å¢åŠ å¯è¯»æ€§


```rust
let float_with_separator = 11_000.789_001;
```


## å¸ƒå°”å€¼


è·Ÿå…¶ä»–è®¡ç®—æœºè¯­è¨€ä¸€æ ·ï¼Œ**Rust**çš„**å¸ƒå°”å€¼**æœ‰ä¸¤ç§å€¼ï¼š`true`å’Œ`false`ã€‚å¸ƒå°”å€¼å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œç±»å‹ç”¨`bool`è¡¨ç¤º


```rust
let t = true;
let f: bool = false;
```


## å­—ç¬¦


ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·ï¼Œå¯ä»¥è®¾ç½®å­—ç¬¦ã€‚å­—ç¬¦å 4ä¸ªå­—èŠ‚ï¼Œå®ƒæ¯”**ASCII**æŒ‡ä»£çš„å†…å®¹æ›´å¤šï¼Œæœ‰ä¸”ä¸é™äºä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰å„å›½è¯­è¨€å­—ç¬¦ï¼Œç”šè‡³è¿˜æœ‰è¡¨æƒ…ä»¥åŠæ²¡æœ‰å®½åº¦çš„ç©ºæ ¼


```rust
let c = 'z';
let z: char = 'â„¤';
let heart_eyed_cat = 'ğŸ˜»';
```


å­—ç¬¦ä½¿ç”¨`unicode`ï¼ŒèŒƒå›´ä»`U+0000`åˆ°`U+D7FF`å’Œ`U+E000`åˆ°`U+10FFFF`


> å®é™…ä¸Š`å­—ç¬¦`å¹¶ä¸æ˜¯åœ¨`unicode`çš„ä¸€ä¸ªçœŸæ­£çš„æ¦‚å¿µï¼Œåé¢è¿˜ä¼šè¯´


## æ··åˆ


### å…ƒç»„


å…ƒç»„(Tuple)ç”¨ä¸€å¯¹` ( ) `åŒ…æ‹¬çš„ä¸€ç»„æ•°æ®ï¼Œå¯ä»¥åŒ…å«ä¸åŒç§ç±»çš„æ•°æ®


```rust
let tup: (i32, f64, u8) = (500, 6.4, 1);
```


ç”¨åŒ¹é…çš„æ–¹å¼å¯ä»¥ä»**å…ƒç»„**ä¸­è·å–å„ä¸ªå‚æ•°


```rust
let tup = (500, 6.4, 1);
let (x, y, z) = tup;
println!("The value of y is: {y}"); // The value of y is: 6.4
```


å…ƒç»„ä½¿ç”¨ç‚¹`.`æŒ‰ç…§é¡ºåºæ¥æŒ‡å‘å…ƒç¥–ä¸­çš„å€¼


```rust
let x: (i32, f64, u8) = (500, 6.4, 1);
let five_hundred = x.0; // 500
let six_point_four = x.1; // 6.4
let one = x.2; // 1
```


### æ•°ç»„


æ•°ç»„(Array)æ˜¯ç”¨ä¸€å¯¹` [ ] `(ä¸­æ‹¬å·)åŒ…å«ä¸€ç»„æ•°æ®ï¼Œä½†æ˜¯è·Ÿå…ƒç»„ä¸ä¸€æ ·ï¼Œæ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´


```rust
let a = [1, 2, 3, 4, 5];
let months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
```


ä½ å¯ä»¥åœ¨ä¸­æ‹¬å·ä¸­è®¾ç½®ç±»å‹ï¼Œå¹¶ä¸”åœ¨` ; `(åˆ†å·)åé¢è®¾å®šæ•°ç»„é•¿åº¦


```rust
let a: [i32; 5] = [1, 2, 3, 4, 5];
```


ä¹Ÿå¯ä»¥è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼çš„æ•°ç»„ï¼Œæ¯”å¦‚è®¾ç½®`5`ä¸ª`3`ç»„æˆçš„æ•°ç»„


```rust
let a = [3; 5]; // [ 3, 3, 3, 3, 3 ]
```


è·å–å…¥ç»„ä¸­çš„å…ƒç´ ï¼Œéœ€è¦ç”¨ä¸­æ‹¬å·æŒ‰ç…§å…ƒç´ çš„ç´¢å¼•(index)å–æ•°æ®


```rust
let a = [1, 2, 3, 4, 5];

let first = a[0]; // 1
let second = a[1]; // 2
```

æ³¨æ„ï¼Œç´¢å¼•å¿…é¡»å°äºæ•°ç»„çš„å°ºå¯¸ï¼Œæ¯”å¦‚æ•°ç»„æœ‰5ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆç´¢å¼•åªèƒ½æ˜¯0~4ï¼Œå¦‚æœè¶…è¿‡é™å®šï¼Œæ¯”å¦‚5ï¼Œå°±æ˜¯ç»å…¸çš„é”™è¯¯*ä¸‹æ ‡è¶Šç•Œ*


```rust
let a = [1, 2, 3, 4, 5];

let v = a[5]; // index out of bounds: the length is 5 but the index is 5
```

